{"name":"PF2E Generate NPC UI","type":"script","scope":"global","author":"UonZ2qxDLySlPIyw","img":"icons/svg/d20-highlight.svg","command":"new Dialog({\n  title: \"Generate Actor and Journal Entry\",\n  content: \"<p>Do you want to generate a new NPC actor, create a new journal entry, or both?</p>\",\n  buttons: {\n    actor: {\n      label: \"Actor Only\",\n      callback: async () => {\n        console.log(\"Generating actor...\");\n        const dr = await game.tables.getName(\"NPCMaster\").draw({ displayChat: false });\n        const msg = dr.results.reduce((acc, r) => acc += \"<li>\" + r.getChatText() + \"</li>\", \"\");\n        Actor.create({ name: \"Generated NPC\", type: \"npc\", \"system.details.privateNotes\": `<ul>${msg}</ul>` });\n      },\n    },\n    journal: {\n      label: \"Journal Entry Only\",\n      callback: async () => {\n        console.log(\"Generating journal entry...\");\n        const dr = await game.tables.getName(\"NPCMaster\").draw({ displayChat: false });\n        const msg = dr.results.reduce((acc, r) => acc += \"<li>\" + r.getChatText() + \"</li>\", \"\");\n        JournalEntry.create({ name: \"Generated NPC\", content: `<ul>${msg}</ul>` });\n      },\n    },\n    both: {\n      label: \"Both\",\n      callback: async () => {\n        console.log(\"Generating actor and journal entry...\");\n        const dr = await game.tables.getName(\"NPCMaster\").draw({ displayChat: false });\n        const msg = dr.results.reduce((acc, r) => acc += \"<li>\" + r.getChatText() + \"</li>\", \"\");\n        Actor.create({ name: \"Generated NPC\", type: \"npc\", \"system.details.privateNotes\": `<ul>${msg}</ul>` });\n        JournalEntry.create({ name: \"Generated NPC\", content: `<ul>${msg}</ul>` });\n      },\n    },\n    cancel: {\n      label: \"Cancel\",\n      callback: () => {\n        console.log(\"Script canceled.\");\n        ui.notifications.warn(\"Script canceled.\");\n      },\n    },\n  },\n  default: \"actor\",\n  close: () => console.log(\"Generate Actor and Journal Entry dialog closed.\"),\n}).render(true);","flags":{"exportSource":{"world":"dev-rolltables","system":"pf2e","coreVersion":"11.305","systemVersion":"5.1.2"},"core":{"sourceId":"Macro.hPuRbroFduH8wsv2"},"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runForSpecificUser":"","runAsGM":false},"scene-packer":{"sourceId":"Macro.hPuRbroFduH8wsv2","hash":"40d551a6c8c0c8ebaa3fd766edfcd77883be3206"}},"_stats":{"systemId":"pf2e","systemVersion":"4.12.6","coreVersion":"10.291","createdTime":1689356278968,"modifiedTime":1689362166529,"lastModifiedBy":"UonZ2qxDLySlPIyw"},"folder":null,"sort":0,"ownership":{"default":0,"UonZ2qxDLySlPIyw":3},"_id":"70FN8uK6TPZnSvPd"}
